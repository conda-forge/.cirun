version: 1
policies:
  - id: astra-toolbox-feedstock-policy
    repo: astra-toolbox-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: cf-autotick-bot-test-package-policy
    repo: cf-autotick-bot-test-package-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: conda-forge-ci-setup-feedstock-policy
    repo: conda-forge-ci-setup-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: false
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: conda-smithy-feedstock-policy
    repo: conda-smithy-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: false
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: cutlass-feedstock-policy
    repo: cutlass-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: flash-attn-feedstock-policy
    repo: flash-attn-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: gstreamer-feedstock-osx-m4-policy
    repo: gstreamer-feedstock
    roles:
      - admin
      - maintain
      - write
    users:
      - wolfv
      - hmaarrfk
    pull_request: true
  - id: jaxlib-feedstock-policy
    repo: jaxlib-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: libmagma-feedstock-policy
    repo: libmagma-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: libmagma-feedstock-windows-policy
    repo: libmagma-feedstock
    roles:
      - admin
      - maintain
      - write
    users:
      - baszalmstra
      - carterbox
      - h-vetinari
      - hmaarrfk
      - isuruf
      - jeongseok-meta
      - mgorny
      - Tobias-Fischer
      - wolfv
    pull_request: true
  - id: mongodb-feedstock-policy
    repo: mongodb-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: muscat-split-feedstock-policy
    repo: muscat-split-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: nodejs-feedstock-policy
    repo: nodejs-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: onnxruntime-feedstock-policy
    repo: onnxruntime-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: openvino-feedstock-windows-policy
    repo: openvino-feedstock
    roles:
      - admin
      - maintain
      - write
    users:
      - artanokhov
      - culhatsker
      - mryzhov
      - h-vetinari
    pull_request: true
  - id: pixi-pack-feedstock-osx-m4-policy
    repo: pixi-pack-feedstock
    roles:
      - admin
      - maintain
      - write
    users:
      - pavelzw
    pull_request: true
  # unified policy; not reflecting "-cpu" in feedstock name intentionally
  - id: pytorch-feedstock-policy
    repo: pytorch-cpu-feedstock
    roles:
      - admin
      - maintain
      - write
    # manual intersection between pytorch maintainers and people who signed the open-gpu TOS:
    # users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
    users:
      - Tobias-Fischer
      - hmaarrfk
      - h-vetinari
      - isuruf
      - mgorny
      - jeongseok-meta
      # not on open-gpu-server access list yet
      # - wolfv
      # - baszalmstra
    pull_request: true
  - id: pytorch-scatter-feedstock-policy
    repo: pytorch_scatter-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: qt-webengine-feedstock-policy
    repo: qt-webengine-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: ray-packages-feedstock-policy
    repo: ray-packages-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: temporalio-cli-feedstock-osx-m4-policy
    repo: temporalio-cli-feedstock
    roles:
      - admin
      - maintain
      - write
    users:
      - wolfv
    pull_request: true
  - id: tensorflow-feedstock-osx-m4-policy
    repo: tensorflow-feedstock
    roles:
      - admin
      - maintain
      - write
    users:
      - h-vetinari
      - hmaarrfk
      - wolfv
      - xhochy
      - aktech
      - jaimergp
      - isuruf
    pull_request: true
  - id: tensorflow-feedstock-policy
    repo: tensorflow-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: torchao-feedstock-policy
    repo: torchao-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: viskores-feedstock-policy
    repo: viskores-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: vllm-feedstock-policy
    repo: vllm-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: vtk-m-feedstock-policy
    repo: vtk-m-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: webkit2gtk4.1-feedstock-policy
    repo: webkit2gtk4.1-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
  - id: xformers-feedstock-policy
    repo: xformers-feedstock
    roles:
      - admin
      - maintain
      - write
    pull_request: true
    users_from_json: https://raw.githubusercontent.com/Quansight/open-gpu-server/main/access/conda-forge-users.json
access_control:
  # Linux: GPU
  - resource: cirun-openstack-gpu-large
    policies:
      - astra-toolbox-feedstock-policy
      - cf-autotick-bot-test-package-policy
      - conda-forge-ci-setup-feedstock-policy
      - conda-smithy-feedstock-policy
      - flash-attn-feedstock-policy
      - libmagma-feedstock-policy
      - muscat-split-feedstock-policy
      - pytorch-feedstock-policy
      - tensorflow-feedstock-policy
      - torchao-feedstock-policy
  - resource: cirun-openstack-gpu-xlarge
    policies:
      - cf-autotick-bot-test-package-policy
      - pytorch-feedstock-policy
      - tensorflow-feedstock-policy
  - resource: cirun-openstack-gpu-2xlarge
    policies:
      - cf-autotick-bot-test-package-policy
      - pytorch-feedstock-policy
      - tensorflow-feedstock-policy
      - viskores-feedstock-policy
      - vllm-feedstock-policy
  - resource: cirun-openstack-gpu-4xlarge
    policies:
      - cf-autotick-bot-test-package-policy
      - pytorch-feedstock-policy
  # Linux: CPU
  - resource: cirun-openstack-cpu-medium
    policies:
      - cf-autotick-bot-test-package-policy
      - onnxruntime-feedstock-policy
      - qt-webengine-feedstock-policy
  - resource: cirun-openstack-cpu-large
    policies:
      - cf-autotick-bot-test-package-policy
      - cutlass-feedstock-policy
      - flash-attn-feedstock-policy
      - jaxlib-feedstock-policy
      - mongodb-feedstock-policy
      - nodejs-feedstock-policy
      - onnxruntime-feedstock-policy
      - pytorch-feedstock-policy
      - pytorch-scatter-feedstock-policy
      - tensorflow-feedstock-policy
      - torchao-feedstock-policy
      - viskores-feedstock-policy
      - vllm-feedstock-policy
  - resource: cirun-openstack-cpu-xlarge
    policies:
      - cf-autotick-bot-test-package-policy
      - flash-attn-feedstock-policy
      - mongodb-feedstock-policy
      - onnxruntime-feedstock-policy
      - pytorch-feedstock-policy
      - qt-webengine-feedstock-policy
      - tensorflow-feedstock-policy
      - torchao-feedstock-policy
      - viskores-feedstock-policy
      - vllm-feedstock-policy
      - xformers-feedstock-policy
  - resource: cirun-openstack-cpu-2xlarge
    policies:
      - cf-autotick-bot-test-package-policy
      - jaxlib-feedstock-policy
      - onnxruntime-feedstock-policy
      - pytorch-feedstock-policy
      - tensorflow-feedstock-policy
      - torchao-feedstock-policy
      - viskores-feedstock-policy
      - vllm-feedstock-policy
      - vtk-m-feedstock-policy
      - webkit2gtk4.1-feedstock-policy
  - resource: cirun-openstack-cpu-4xlarge
    policies:
      - cf-autotick-bot-test-package-policy
      - onnxruntime-feedstock-policy
      - ray-packages-feedstock-policy
      - tensorflow-feedstock-policy
      - vllm-feedstock-policy
  # Windows
  - resource: cirun-azure-windows-2xlarge
    policies:
      - libmagma-feedstock-windows-policy
      - onnxruntime-feedstock-policy
      - openvino-feedstock-windows-policy
      - pytorch-cpu-feedstock-cpu-policy
  - resource: cirun-azure-windows-4xlarge
    policies:
      - libmagma-feedstock-windows-policy
      - onnxruntime-feedstock-policy
      - pytorch-feedstock-policy
  # OSX
  - resource: cirun-macos-m4-large
    policies:
      - gstreamer-feedstock-osx-m4-policy
      - pixi-pack-feedstock-osx-m4-policy
      - pytorch-feedstock-policy
      - temporalio-cli-feedstock-osx-m4-policy
      - tensorflow-feedstock-osx-m4-policy
